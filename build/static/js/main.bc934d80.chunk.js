(this["webpackJsonpca-3-frontend"]=this["webpackJsonpca-3-frontend"]||[]).push([[0],{49:function(e,t,n){e.exports=n(89)},54:function(e,t,n){},86:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),c=n.n(o),l=(n(54),n(2)),i=n(5),u=n(6),s=n(7),h=n(8),p=n(9),m="https://kodebanditterne.dk/CA3-Backend-2.0",f="http://localhost:3000/orders";function d(e){return e.ok?e.json():Promise.reject({status:e.status,fullError:e.json()})}var b=new(function(){function e(){var t=this;Object(i.a)(this,e),this.setToken=function(e){localStorage.setItem("jwtToken",e)},this.getToken=function(){return localStorage.getItem("jwtToken")},this.loggedIn=function(){return null!=t.getToken()},this.logout=function(){localStorage.removeItem("jwtToken")},this.login=function(e,n){var a=t.makeOptions("POST",!0,{username:e,password:n});return fetch(m+"/api/login",a).then(d).then((function(e){t.setToken(e.token)}))},this.fetchData=function(){var e=t.makeOptions("GET",!0);return fetch(m+"/api/info/user",e).then(d)},this.sendOrder=function(e){if(""!==e.date){var n=t.makeOptionsWithoutToken("POST",e);fetch(f,n),console.log("HEY YOU MADE IT!")}console.log(e)}}return Object(u.a)(e,[{key:"makeOptions",value:function(e,t,n){var a={method:e,headers:{"Content-type":"application/json",Accept:"application/json"}};return t&&this.loggedIn()&&(a.headers["x-access-token"]=this.getToken()),n&&(a.body=JSON.stringify(n)),a}},{key:"makeOptionsWithoutToken",value:function(e,t){var n={method:e,headers:{"Content-type":"application/json"}};return t&&(n.body=JSON.stringify(t)),n}}]),e}()),g=n(20),O=n.n(g),v=n(23),E=n(16),j=n(35),k=n(45),y=n.n(k);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(){var e=Object(a.useState)(),t=Object(E.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(""),l=Object(E.a)(c,2),i=l[0],u=l[1],s=Object(a.useState)(),h=Object(E.a)(s,2),p=h[0],m=h[1],f=Object(a.useState)(),d=Object(E.a)(f,2),g=d[0],k=d[1],w=Object(a.useState)(new Date),C=Object(E.a)(w,2),P=C[0],D=C[1],x=Object(a.useState)({id:null,pickupPoint:"",car:"",date:null}),I=Object(E.a)(x,2),T=I[0],M=I[1];Object(a.useEffect)((function(){function e(){return(e=Object(v.a)(O.a.mark((function e(){var t,n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/locations");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a=[],n.forEach((function(e){var t={label:e.address,value:e};a.push(t)})),m(a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(v.a)(O.a.mark((function e(){var t,n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/cars");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a=[],n.forEach((function(e){var t={label:e.make,value:e};a.push(t)})),k(a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}()}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,r.a.createElement("b",null,"Kodebanditternes car rental ")),r.a.createElement("p",null," ","Our site searches cheap car rental prices in over 5000 locations worldwide. Find your ideal car and book online today."," "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h3",null,"Choose the days that you want to rent a car"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log(T),b.sendOrder(T)}},r.a.createElement(y.a,{name:"date",onChange:function(e){D(e),M(S({},T,{date:e}))},Startvalue:P,selectRange:!0,minDate:new Date}),r.a.createElement("br",null),r.a.createElement("h3",null,"Choose pick-up location"),r.a.createElement(j.a,{name:"pickupPoint",value:n,onChange:function(e){o(e),M(S({},T,{pickupPoint:e.value}))},options:p}),r.a.createElement("h3",null,"Choose Brand"),r.a.createElement(j.a,{name:"car",value:i,onChange:function(e){u(e),M(S({},T,{car:e.value}))},options:g}),r.a.createElement("input",{type:"submit",value:"Order"})))}var P=n(1),D=n(21),x=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(h.a)(t).call(this,e))).onMarkerClick=n.onMarkerClick.bind(Object(P.a)(n)),n.state={showingInfoWindow:!1,activeMarker:{},selectedPlace:{}},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onMarkerClick",value:function(e,t,n){this.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})}},{key:"render",value:function(){return this.props.google?r.a.createElement("div",{style:{position:"relative",height:"calc(100vh - 20px)"}},r.a.createElement(D.Map,{style:{},google:this.props.google,initialCenter:{lat:55.642954,lng:12.545465},zoom:11},r.a.createElement(D.Marker,{title:"Copenhagen Central Station",name:"Central Station",position:{lat:55.672388,lng:12.563445}}),r.a.createElement(D.Marker,{title:"Copenhagen Airport",name:"Airport",position:{lat:55.629953,lng:12.637484}}),r.a.createElement(D.Marker,{title:"Copenhagen Commercial Neighborhood",name:"Business Area",position:{lat:55.614174,lng:12.472494}}),r.a.createElement(D.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",null,r.a.createElement("h1",null,this.state.selectedPlace.name))))):r.a.createElement("div",null,"Loading...")}}]),t}(a.Component),I=Object(D.GoogleApiWrapper)({apiKey:"AIzaSyD3sF-lhvfrbKOQD8PG7Nd9SM4-D6txKx8",v:"3.30"})(x),T=n(25),M=n(19),N=(n(86),n(46)),A=n.n(N),W=function(){var e="http://localhost:3000/cars",t=Object(a.useState)(!1),n=Object(E.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)({}),i=Object(E.a)(l,2),u=i[0],s=i[1];return Object(a.useEffect)((function(){function t(){return(t=Object(v.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:t.sent.json().then((function(e){return s(e)})).catch((function(e){return c(e)}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),console.log(o),r.a.createElement("section",null,r.a.createElement("div",null,r.a.createElement("pre",null,r.a.createElement("div",null,r.a.createElement("p",null," "),r.a.createElement("h1",null," ")),r.a.createElement("span",{className:"planets"},r.a.createElement(A.a,{id:"json-pretty",data:u})),r.a.createElement("hr",null))))},F=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(h.a)(t).call(this,e))).login=function(e){e.preventDefault(),n.props.login(n.state.username,n.state.password)},n.onChange=function(e){n.setState(Object(l.a)({},e.target.id,e.target.value))},n.state={username:"",password:""},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Login"),r.a.createElement("form",{onSubmit:this.login,onChange:this.onChange},r.a.createElement("input",{type:"text",placeholder:"User Name",id:"username",required:!0}),r.a.createElement("input",{type:"password",placeholder:"Password",id:"password",required:!0}),r.a.createElement("button",null,"Login")))}}]),t}(a.Component),L=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(h.a)(t).call(this,e))).state={dataFromServer:"Fetching!!"},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.fetchData().then((function(t){return e.setState({dataFromServer:t.msg})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(J,null),r.a.createElement("h2",null,"Data Received from server"),r.a.createElement("h3",null,this.state.dataFromServer),r.a.createElement(K,null))}}]),t}(a.Component),B=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(h.a)(t).call(this,e))).logout=function(){b.logout(),n.setState({loggedIn:!1})},n.login=function(e,t){b.login(e,t).then((function(e){return n.setState({loggedIn:!0})}))},n.state={loggedIn:!1},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.state.loggedIn?r.a.createElement(T.a,null,r.a.createElement("div",null,r.a.createElement(L,null),r.a.createElement("button",{onClick:this.logout},"Logout"))):r.a.createElement(F,{login:this.login}))}}]),t}(a.Component),J=function(){return r.a.createElement("ul",{className:"header"},r.a.createElement("li",null,r.a.createElement(T.b,{exact:!0,activeClassName:"active",to:"/"},"Order")),r.a.createElement("li",null,r.a.createElement(T.b,{activeClassName:"active",to:"/carSelection"},"carSelection")),r.a.createElement("li",null,r.a.createElement(T.b,{activeClassName:"active",to:"/location"},"Location")))},K=function(){return r.a.createElement(M.c,null,r.a.createElement(M.a,{exact:!0,path:"/"}," ",r.a.createElement(C,null)," "),r.a.createElement(M.a,{path:"/carSelection"}," ",r.a.createElement(W,null)," "),r.a.createElement(M.a,{path:"/location"}," ",r.a.createElement(I,null)," "))};c.a.render(r.a.createElement(B,null),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.bc934d80.chunk.js.map